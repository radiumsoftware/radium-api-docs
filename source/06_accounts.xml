<document>
  <title>Accounts</title>
  <position>6</position>
  <section>
    <docs>
      <![CDATA[
      Accounts are like houses. All resources in live in a house. The account is the house.
      You only have access to things inside your account. Accounts are for groups of users.
      They intended for Companies, IE, your company would open an account in Radium then
      add users to it. Usage Based Billing services are billed to the account. The account
      contains billing and credit.

      ### Deleting Accounts

      This should be used with **EXTREME** caution. It will delete everything from the DB. 
      There is no going back once this happens. Everything that has ever happened 
      in Radium will be deleted!
      ]]>
    </docs>
  </section>
  <section title="Routes & Permissions">
    <docs>
      <![CDATA[
      * `POST /accounts`: God developers only
      * `GET /accounts/:id`: All developers
      * `PUT /account/:id`: All developers
      * `DELETE /accounts/:id` God developers only

      The `user_api_key` is not required to create an account. It is however,
      **required** for the others. This tells the API that a user has granted
      you access to their account. This prevents rouge developers from 
      trying to poke around into other company's accounts.
      ]]>
    </docs>
  </section>
  <section title="Account Format">
    <docs>
      <![CDATA[
      <dl>
        <dt>name</dt>
        <dd><strong>Required</strong></dd>

        <dt>approve_follow_requests</dt>
        <dd>
          Determines the default setting for handling following requests.
          All followable records will use the value for their default 
          which can be changed later. <br/>

          Example: If this is true, then all contacts will have their
          following requests automatically approved UNLESS switched
          off specifically for that contact. <br/>

          <em>Default:</em> True
        </dd>

        <dt>users</dt>
        <dd>IDs of all the users in this account</dd>

        <dt>contacts</dt>
        <dd>IDs of all the contacts in this account</dd>

        <dt>campaigns</dt>
        <dd>IDs of all the campaigns in this account</dd>
      </dl>
      ]]>
    </docs>
    <reference title="Account Format">
      <![CDATA[
      ```javascript
      {
        "id": 305,
        "created_at": "2011-12-14T12:39:23Z",
        "updated_at": "2011-12-14T12:39:23Z",
        "name": "Apple",
        "approve_follow_requests": true,
        "users": [1,3,4,5],
        "contacts": [1,2],
        "campaigns": [1,3,4,5]
      }
      ```
      ]]>
    </reference>
  </section>
  <section>
    <reference title="Create an Account">
      <![CDATA[
      `POST https://api.radiumcrm.com/accounts`

      ### Parameters

      ```javascript
      {
        "developer_api_key": "foo",
        "accounts": {
          "name": "My Company Inc."
        }
      }
      ```
      ]]>
    </reference>
  </section>
  <section>
    <reference title="Update an Account">
      <![CDATA[
      `PUT https://api.radiumcrm.com/accounts/:id`

      ### Parameters

      Set the `user_api_key` to a user in that account's api key.

      ```javascript
      {
        "developer_api_key": "foo",
        "user_api_key": "bar",
        "accounts": {
          "name": "New Name!"
          "approve_following_requests": false
        }
      }
      ```
      ]]>
    </reference>
  </section>
</document>
