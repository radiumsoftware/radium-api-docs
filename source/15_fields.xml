<document>
  <title>Fields</title>
  <position>15</position>
  <section>
    <docs>
      <![CDATA[
      Fields are arbitary key & value pairs that you can use to add
      your own data to different resources. `Contacts` and `Groups`
      can have fields. They also accept nested fields. A field
      can be specified to be a certain `kind`. The `kind` will be used
      for matching purposes. They can also use a defined set of 
      values.
      ]]>
    </docs>
  </section>
  <section title="Routes & Permissions">
    <docs>
      <![CDATA[
      There are no routes for managing the fields themselves. This is
      because they are always attached to other objects. 

      They are managed through nested attributes.
      ]]>
    </docs>
  </section>
  <section title="Format">
    <docs>
      <![CDATA[
      Fields are very simple. They are key value pairs.
      You can specify `accepted_values` if you'd like to 
      constrain possible inputs.

      <dl>
        <dt>name</dt>
        <dd><strong>Required</strong></dd>

        <dt>value</dt>
        <dd>String value. Validation enforced according to `kind`</dd>

        <dt>accepted_values</dt>
        <dd>An optional array of allowed values. When this is set,
          the server will not save the record unless the `value` matches
          one of these exactly.
        </dd>

        <dt>kind</dt>
        <dd>
          <strong>Required</strong><br />
          Allowed values: 
          <code>email_address</code>,
          <code>phone_number</code>,
          <code>url</code>,
          <code>other</code>
        </dd>
      </dl>
      ]]>
    </docs>
    <reference title="Field Format">
      <![CDATA[
      ```javascript
      {
        "id": 283,
        "created_at": "2011-12-14T19:12:25Z",
        "updated_at": "2011-12-14T19:12:25Z",
        "name": "Industry",
        "value": "Property & Casualty Insurance",
        "accepted_values": null,
        "kind": "other"
      }
      ```
      ]]>
    </reference>
  </section>
  <section title="Nested Attributes">
    <docs>
      <![CDATA[
      You manage fields through the parent object. Each parent
      object has `fields_attributes` attribute used to manage
      the collection. You can do CRUD through this attribute.

      The attribute takes an array of field objects according
      to the format. 

      If you pass an `id` then that field will be updated.
      If you do not pass an `id` a new field will be created.
      If you pass `id` & `delete` the field will be deleted.
      ]]>
    </docs>
    <reference title="Nested Fields">
      <![CDATA[
      ```javascript
      {
        "fields_attributes": [
          {
            "id": 1,
            "value": "New Value"
          },
          {
            "name": "Industry",
            "value": "IT",
            "kind": "other"
          },
          {
            "_delete": true
            "id": 2
          }
        ]
      }
      ```
      ]]>
    </reference>
  </section>
</document>
